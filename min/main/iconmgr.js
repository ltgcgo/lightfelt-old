"use strict";var IconMgr=function(e="",t){var i=this;this.rootDir=e;var n=new Map;this.getSize=function(e){if(n.has(e))return n.get(e)},this.setSize=function(e,t,i,r=!0){if(n.has(e)&&!n.get(e).m)throw ReferenceError("Tried to tinker with non-editable entry");var s={w:t,h:i,m:r};return n.set(e,s),s},this.delSize=function(e){var t=null;return n.has(e)&&(t=n.get(e)),n.delete(e),t};var r=function(e){var t=null;if(e)if(0==e.indexOf("~")){for(;-1!=e.indexOf("~~");)e=e.replace("~~","~");t=n.get(e.slice(1))}else{var i=e.split(",");i.forEach((function(e,t,i){i[t]=Math.round(parseFloat(e))})),t={w:i[0],h:i[1],m:!1}}return t};this.defaultSize={};var s=new Map;this.getIcon=function(e,t=!0){var n=null;if(s.has(e)){n={src:"",size:null},t&&(n.src=this.rootDir);var r=s.get(e);n.src+=r.src,n.size=r.size||i.defaultSize}return n},this.setIcon=function(e="",t="",i){var n={src:t,size:i||this.defaultSize};s.set(e,n)},this.delIcon=function(e){var t=null;return s.has(e)&&(t=s.get(e)),s.delete(e),t},this.updateConf=function(e){e&&(s.forEach((function(e,t){s.delete(t)})),n.forEach((function(e,t){n.delete(t)})),this.name=e.name,this.identifier=e.identifier,e.iconMgr.sizes.forEach((function(e){i.setSize(e.ref,r(e.size).w,r(e.size).h,!1)})),this.defaultSize=r(e.iconMgr.default),e.resources.forEach((function(e){i.setIcon(e.id,e.src,r(e.size||"~default"))})))},this.updateIcon=function(e){if(s.has(e)){var t=this.getIcon(e);Array.from(document.getElementsByClassName("icon-"+e)).forEach((function(e){e.src=t.src,e.style.width=t.size.w.toString()+"px",e.style.height=t.size.h.toString()+"px",self.debugMode&&console.log("Icon [${id}] updated.")}))}},this.updateIconsA=function(e){e.forEach((function(e){i.updateIcon(e)}))},this.updateIcons=function(){return this.updateIconsA(arguments)},this.updateIconsAll=function(){s.forEach((function(e,t){i.updateIcon(t)}))},this.updateConf(t)};